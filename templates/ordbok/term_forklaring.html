{% load crispy_forms_filters %}
{% block förklaring %}

<div id="förklaring" class="förklaring">
{% if begrepp_full %}

<div class="searchTable">

<table id="term_förklaring_tabell" class="table table-bordered table-striped">
    <tbody>
        <tr>
            <td>Beskrivning</td>
            <td>{{begrepp_full.begrepp_kontext}}</td>
        </tr>        


        <tr>
            <td>Version</td>
            <td>{{begrepp_full.begrepp_version_nummer}}</td>
        </tr>
        <tr>
            <td>Definition</td>
            <td>{{begrepp_full.definition}}</td>
        </tr>
        <tr>
            <td>Externt ID</td>
            <td>{{begrepp_full.externt_id}}</td>
        </tr>
        <tr>
            <td>Externt Register</td>
            <td>{{begrepp_full.externt_register}}</td>
        </tr>
        <tr>
            <td>Status</td>
            <td>{{begrepp_full.externt_register}}</td>
        </tr>
        <tr>
            <td>Term</td>
            <td>{{begrepp_full.term}}</td>
        </tr>
        <tr>
            <td>Icke Svensk Term</td>
            <td>{{begrepp_full.utländsk_term}}</td>
        </tr>
        <tr>
            <td>Icke Svensk Definition</td>
            <td>{{begrepp_full.utländsk_definition}}</td>
        </tr>
        <tr>
            <td>VGR ID</td>
            <td>{{begrepp_full.vgr_id}}</td>
        </tr>
        <tr>
            <td>Synonym</td>
            <td>
                {% for list_item in synonym_full %}
                    {{list_item.synonym}} ({{list_item.synonym_status}})<br>
                {% endfor %}
            </td>        
        </tr>        
        <tr>
            <td>Domän</td>
            <td>
                {% for list_item in domän_full %}
                    {{list_item.domän_namn}}<br>
                {% endfor %}
            </td>
        </tr>

        <tr>
            <td><button id="opponera_button">Kommentera</button></td>
            <td><button id="bekräfta_button">Verifiera användning</button></td>
        </tr>
    </tbody>
</table> 
</div>

{% else %}
        <p>Ingen definition hittades...</p>
{% endif %}


</div>

<div id="opponera_bekräfta">

</div>

<script>

function get_form_function(url, div_to_replace, type_method){
        
        $.ajax({
            url : url,
            type : type_method,
            success: function(response){
                $(div_to_replace).html(response);
            }
        });
    }
    
$(document).ready(function(){
    $("#opponera_button").click(function(){
        
        get_form_function(url="{% url 'opponera_term' %}?q={{begrepp_full.term}}", 
                          div_to_replace="#opponera_bekräfta",
                          type_method="GET");
        
                        });
                          
    $("#bekräfta_button").click(function(){
        get_form_function(url="{% url 'bekräfta_term' %}?q={{begrepp_full.term}}", 
                          div_to_replace="#opponera_bekräfta"),
                          type_method="GET";
                        });    
                    });

</script>

{% endblock %}