{% extends 'base.html' %}
{% load static %}



{% block mitten-span %}

{% if begrepp %}

<div class="row mt-5 top-buffer-15">
    <table class="table table-bordered" id="definition_table">
        <thead>
          <tr>
            <th>Term</th>
            <th>Definition</th>
            <th>Synonym</th>
          </tr>
        </thead>
        <tbody id="myTable">
          {% for begrepp in begrepp %}
            {% if begrepp.begrepp_status == "Klar" %}
            <tr class="table-success">
              <td><a href="javascript:visa_mening({{begrepp.begrepp_id}})" id={{begrepp.begrepp_id}}>{{begrepp.term}}</a></td>              
              <td>{{begrepp.definition}}</td>   
              <td>
                  {% for syn in synonym %}
                    {% ifequal syn.begrepp_id begrepp.begrepp_id %}
                        {% if syn.synonym_status == "Avråds" %}
                        <div class="tooltip">  - <s class="text-danger">{{syn.synonym}}</s>
                          <span class="tooltiptext" style="background-color: red;">Status : {{syn.synonym_status}}</span>
                      </div><br>
                        {% else %}
                        <div class="tooltip">- {{syn.synonym}}
                          <span class="tooltiptext">Status : {{syn.synonym_status}}</span>
                        </div><br>
                        {% endif %} 
                    {% endifequal %}
                  {% endfor %}
                
              </td>
            </tr>
            {% elif begrepp.begrepp_status == "Preliminär" %}
            <tr class="table-warning">
              <td><a href="javascript:visa_mening({{begrepp.begrepp_id}})" id={{begrepp.begrepp_id}}>{{begrepp.term}}</a></td>
              <td>{{begrepp.definition}}</td>   
              <td>
                
                  {% for syn in synonym %}
                    {% ifequal syn.begrepp_id begrepp.begrepp_id %}
               
                      {% if syn.synonym_status == "Avråds" %}
                      <div class="tooltip">  - <s class="text-danger">{{syn.synonym}}</s>
                        <span class="tooltiptext" style="background-color: red;">Status : {{syn.synonym_status}}</span>
                    </div><br>
                        {% else %}
                        <div class="tooltip">- {{syn.synonym}}
                          <span class="tooltiptext">Status : {{syn.synonym_status}}</span>
                        </div><br>
                        {% endif %}
                 
                    {% endifequal %}
                  {% endfor %}
                
              </td>
            </tr>
            {% elif begrepp.begrepp_status == "Avråds" %}
            <tr>
              <td><a href="javascript:visa_mening({{begrepp.begrepp_id}})" id={{begrepp.begrepp_id}} ><s class="text-danger">{{begrepp.term}}</s></a></td>
              <td>{{begrepp.definition}}</td>   
              <td>
                
                  {% for syn in synonym %}
                    {% ifequal syn.begrepp_id begrepp.begrepp_id %}
                        {% if syn.synonym_status == "Avråds" %}
                        <div class="tooltip">  - <s class="text-danger">{{syn.synonym}}</s>
                          <span class="tooltiptext" style="background-color: red;">Status : {{syn.synonym_status}}</span>
                      </div><br>
                        {% else %}
                        <div class="tooltip">- {{syn.synonym}}
                          <span class="tooltiptext">Status : {{syn.synonym_status}}</span>
                        </div><br>
                        {% endif %}
                    
                    {% endifequal %}
                  {% endfor %}
                
              </td>
            </tr>
            {% else %}
            <tr>
              <td><a href="javascript:visa_mening({{begrepp.begrepp_id}})" id={{begrepp.begrepp_id}} >{{begrepp.term}}</a></td>
              <td>{{begrepp.definition}}</td>   
              <td>
                
                  {% for syn in synonym %}
                    {% ifequal syn.begrepp_id begrepp.begrepp_id %}
                    
                      {% if syn.synonym_status == "Avråds" %}
                      <div class="tooltip">  - <s class="text-danger">{{syn.synonym}}</s>
                        <span class="tooltiptext " style="background-color: red;">Status : {{syn.synonym_status}}</span>
                    </div><br>
                        {% else %}
                        <div class="tooltip">- {{syn.synonym}}
                        <span class="tooltiptext">Status : {{syn.synonym_status}}</span>
                        </div>
                        {% endif %}
                    
                    {% endifequal %}
                  {% endfor %}
                
              </td>
            </tr>
          {% endif %}
          {% endfor %}
          </tbody>

</div>



{% else %}

<div id="nyTermForm">
    <input type="image" src="{% static '/images/FFFFFF-0.8.png' %}" onload=populate_request_form()>
</div>
{% endif %}
{% endblock mitten-span %}

{% block extra_javascript %}

<script>
function visa_mening(term_id)
{    
  $.ajax({
      type: "GET",
      dataType: "json",
      url: "{% url 'begrepp_förklaring' %}" + "?q=" + term_id,
      success: function(data) {
        var display_html = data.html_from_view;
        $('#mitten-span').html(display_html);
      },      
      error: function() {
        $('#mitten-span').html("Fel - Hoppsan! Jag får ingen definition från servern...finns ett problem..prova trycka Ctrl-Shift-R");
      },
    }).done(function( data, textStatus, jqXHR) {
        $("#definition_table").remove();
    });
    
}


</script>

{% endblock extra_javascript %}